<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="padding: 20px; font-family: Arial;">
    <h2>Тест Mini App</h2>
    
    <input type="text" id="testInput" placeholder="Введите любой текст">
    <button onclick="sendTestData()">Отправить в бота</button>
    
    <div id="status" style="margin-top: 20px;"></div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        
        function sendTestData() {
            const input = document.getElementById('testInput').value;
            
            // Способ 1: sendData (рекомендуется)
            tg.sendData(JSON.stringify({
                test: true,
                text: input,
                time: new Date().toISOString()
            }));
            
            // Способ 2: через popup для проверки
            tg.showPopup({
                title: 'Данные отправлены',
                message: `Отправлено: ${input}`,
                buttons: [{type: 'ok'}]
            });
            
            document.getElementById('status').innerHTML = 
                '<span style="color: green">✅ Данные отправлены в бота!</span>';
            
            // Закрываем через 2 секунды
            setTimeout(() => tg.close(), 2000);
        }
        
        console.log('Mini App готов к работе');
        console.log('User:', tg.initDataUnsafe?.user);
    </script>
</body>
</html>
